# 使用方法
## 启动软件
将配置文件（通常为.json结尾）拖拽到exe上即可启动。

也可以通过命令行启动。-h参数可以查看命令介绍。
## 关闭软件
键值为 **255** 的按钮抬起后软件会关闭，需要在编写配置时注意加入关闭按钮。
## 隐藏键位
键值为 **0** 的按钮在抬起后会切换其他全部按钮的显示/隐藏状态，这个按钮本身不会被隐藏。
## 摇杆、鼠标、滚轮
通过按钮分组为不同类型可以实现：
- 每个按钮可以有多个键值
- 在不同按钮间滑动
  - 滑动时包含相同键值的键不会断连
  - 自定义拖尾个数（使用一个手指滑动即可同时按下多个按钮）
- 滑动时带动鼠标移动
- 滑动手指时模拟滚轮滚动
- 双击保持、单击保持等功能
- 模拟触摸板

详细配置方法见后文
## 关于uiAccess
Windows的最高置顶权限，保证能够位于绝大多数窗口之上（包括任务管理器和开始菜单），实现方式来自于：
[github链接](https://github.com/killtimer0/uiaccess)，本软件默认开启了此功能，如需要关闭请从命令行启动，并加上 **-u** 参数。
## 关于高dpi
默认不开启高dpi模式，交给系统缩放，这样软件渲染的分辨率更低，会略显模糊但是性能开销更低。我测试（小米平板5上）开启高dpi会出现绘制延迟导致不太跟手，所以默认没有开启。如果有需要开启，可以右键-属性-兼容性-更改高dpi设置-高dpi缩放替代-应用程序，然后在配置文件中调整 **"scale"** 参数使得界面缩放到正常大小
# 配置文件编写
## 基本结构
采用json格式
```json
{
    "groups": [
        {
            "offset": {"x": 200,"y": 200},
            "buttons": [
                {
                    "name": "A",
                    "key": [65],
                    "rect": {"x": 0,"y": 0,"w": 100,"h": 100}
                },{
                    "name": "x",
                    "key": [255],
                    "rect": {"x": 100,"y": 0,"w": 100,"h": 100}
                }
            ]
        }
    ]
}
```
这里展示一个最基本的示例，包含两个按钮。  
结构为分组结构，可以有多个组，每个组有多个按钮。建议将功能和位置都接近的按钮分到一个组中。   
- **offset** 为整组的坐标偏移量，改变这个值可以直接移动整租按钮。   
- **name** 为按钮的名字，会显示在按钮中心
- **key** 为键值，必须位于 **0~255** 之间，可以有多个，也可以是空的。键值表请见
[微软官方文档](https://learn.microsoft.com/zh-cn/windows/win32/inputdev/virtual-key-codes)
- **rect** 为形状，除了**rect**之外，还有**round**和**roundedRect**供三种形状。
  - **rect**： x,y为中心坐标，w,h为宽度和高度。
  - **round**： x,y为中心坐标，r为半径。
  - **roundedRect**： x,y为中心坐标，w,h为宽度和高度，r为圆角半径。

## 自定义外观
以上是必须设定的内容，下面是一些可选项：
- **alpha**：全局不透明度，**0~255**（默认为128）
- **scale**：全局缩放系数（默认为1）
- 按钮的外观设置，可以作用于每一层
  - **style**：未按下时的样式
  - **stylePressed**：按下后的样式
    - color：颜色
    - textColor：文字颜色
    - outlineColor：边框颜色
    - fontFamily：字体名（如系统上未安装该字体，采用默认字体）
    - fontSize：字体大小（默认为24）
    - fontStyle：字体样式（normal,italic,oblique)，后两种都是斜体，默认为第一个。
    - fontWeight：字体粗细，必须在1~999之间整数，默认为500
    - outlineWidth：边线宽度（默认为0）

示例：
```json
{
    "alpha": 100,
    "scale": 1.2,
    "groups": [
        {
            "outlineWidth": 1,
            "style": {
                "fontFamily": "Jetbrains Mono",
                "outlineColor":{"r":255,"g":0,"b":0}
            },
            "stylePressed": {
                "fontFamily": "Jetbrains Mono",
                "fontStyle": "italic",
                "outlineColor":{"r":0,"g":255,"b":0}
            },
            "offset": {"x": 200,"y": 200},
            "buttons": [
                {
                    "name": "x",
                    "key": [255],
                    "rect": {"x": 100,"y": 0,"w": 100,"h": 100}
                }
            ]
        }
    ]
}
```

## 自定义逻辑
- **type**：组的特殊逻辑（默认为0）
  - **0**：滑动时按下的按钮不变，直到抬起时松开。 
  - **1**：滑动时拖动（类似摇杆）
    - **slideCount**：拖动时同时按下的按钮个数。默认为1。
  - **2**：组中的第一个按钮不能滑动，其余按滑动方式处理
  - **3**：组中的按钮单击切换按下/抬起状态
  - **4**：组中的按钮双击切换按下/抬起状态
    - **ms**：双击判定间隔
  - **7**：触摸板模式，滑动->移动鼠标，单击->单击按键，双击->双击按键
    - **ms**：双击判定间隔
    - **sensitivity**：鼠标灵敏度
  - **8**：鼠标模式，移动手指时会带动鼠标。与前一个接近。
    - **sensitivity**：鼠标灵敏度
  - **9**：滚轮模式，移动手指时模拟滚轮的滚动。
    - **sensitivity**：滚轮灵敏度
  